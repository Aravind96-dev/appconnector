<html>

<head>
    <title>Open App ðŸ‘‰</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
</head>

<body>
    <iframe style="display:none" height="0" width="0" id="loader"></iframe>
    <script>
        var fallbackLink = '';
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        const locationPath = window.location.hash;
        const encodedChiperTextParam = new URLSearchParams(locationPath.slice(locationPath.indexOf("?")));
        const decodeURIParam = decodeURIComponent(encodedChiperTextParam.get('param'));
        const plainTextParam = CryptoJS.AES.decrypt(decodeURIParam, "RLm-Auf76eshsdafuUSDfa").toString(CryptoJS.enc.Utf8);
        const pramList = plainTextParam.split("/");
        const scheme = 'com.gofrugal.' + pramList[pramList.length - 2];
        const appleId = pramList[pramList.length - 1];
        console.log("gofrugal://" + scheme + plainTextParam);
        var now = new Date().valueOf();
        
         var isiOS = navigator.userAgent.match('iPad') || navigator.userAgent.match('iPhone') || navigator.userAgent.match('iPod'),
        isAndroid = navigator.userAgent.match('Android');

    // Mobile
    if (isiOS || isAndroid) {
      document.getElementById('loader').src = scheme+"://" + scheme + "/" + plainTextParam;

      fallbackLink = isAndroid ? 'market://details?id=' + scheme:
                                 `itms-apps://itunes.apple.com/app/id${appleId}` ;
    }
    window.setTimeout(function (){ window.location.replace(fallbackLink); }, 1);
        
        
        
    
            
    </script>
</body>

</html>
